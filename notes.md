# 注意事项
## 1. 避免使用高频词

这里的 **高频词** 指的是在 **大量规则** 中频繁出现的词。

文章中的高频词(最极端的就是停止词)频繁地出现在大多数文章中，这样的词对文章的区分度很低，同时会导致搜索引擎产生大量计算。

同样的，在规则数据库中，在大量规则中频繁出现的词，会导致**用文章搜规则**时召回大量规则ID，导致在规则验证阶段付出昂贵的计算成本。

虽然文章中的高频词不等于规则中的高频词，但现实业务中两者往往是趋同的。所以配置规则时应当尽量**回避趋同**倾向，例如尽量少使用 "北京"，"政府" ，"医院"，"银行" 这样的词，而是使用精确词，例如 "北京人民医院"，"民生银行"，"招商银行"，"xxxx县政府"。

性能问题仅出现在使用了相同的高频词的多条规则中。例如有共有1万条规则，有9000条都包含 "北京"，对性能影响就很大，但如果只有50条包含"北京"，对性能影响就很小。

所以结论就是：如果一个词本身虽然是高频词，但只出现在少量规则中，对性能的影响就不大。

## 2. [ ] 中的 near
[ ] 中的 near 会被编译成自动机，正确使用的情况下，可以大幅增加规则的精确命中能力，例如：

当难以避免使用高频词时，可以将高频词放入 [ ] 中并增加限制条件来打破高频词的高频特征：
```
[ (北京 near/+5 政府 or 北京 near/+5 法院) ] and [ 上访 near/5 群众 ]
```
这与
```
(北京 near/+5 政府 or 北京 near/+5 法院) and 上访 near/5 群众
```
两者语义是相同的，区别在于，[ ] 包起来的部分会增加编译时间，增加数据库的尺寸，但是会减小搜索阶段的运行时间。

所以，原则上，低频词的匹配精度高，可以放在 [ ] 外，对性能影响不大，高频词在限制条件的情况下可以放入 [ ] 中。

## 3. [ ] 中的 and, not
原则上 [ ] 中的 and, not 用来操作复合正则表达式的，但也可以用来操作普通的匹配词。但用来操作普通匹配词时稍有不当就会导致绝对排除（不匹配任何文档），例如，如果将前述的规则写成：
```
[ (北京 near/+5 政府 or 北京 near/+5 法院) and 上访 near/5 群众 ]
```
这就是一个不会匹配任何结果的规则，会导致，这条规则编译失败。因为 [ ] 中是正则语言运算，and 表示两者的交集，结果为空集。所以虽然语法上 [ ] 内的 and, not 对普通词也有效，但是语义分析会失败。
